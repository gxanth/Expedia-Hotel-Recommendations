<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "_server_source_0", "values": [{"bin_center": 52.90965027542803, "column": "price_usd", "rel_freq": 0.005}, {"bin_center": 138.03763624411354, "column": "price_usd", "rel_freq": 0.027}, {"bin_center": 60.003649106151826, "column": "price_usd", "rel_freq": 0.017}, {"bin_center": 109.66164092121838, "column": "price_usd", "rel_freq": 0.134}, {"bin_center": 145.13163507483733, "column": "price_usd", "rel_freq": 0.011}, {"bin_center": 123.84963858266596, "column": "price_usd", "rel_freq": 0.06}, {"bin_center": 130.94363741338975, "column": "price_usd", "rel_freq": 0.044}, {"bin_center": 81.2856455983232, "column": "price_usd", "rel_freq": 0.094}, {"bin_center": 159.31963273628492, "column": "price_usd", "rel_freq": 0.001}, {"bin_center": 152.22563390556112, "column": "price_usd", "rel_freq": 0.008}, {"bin_center": 31.627653783256648, "column": "price_usd", "rel_freq": 0.001}, {"bin_center": 45.81565144470424, "column": "price_usd", "rel_freq": 0.003}, {"bin_center": 74.19164676759941, "column": "price_usd", "rel_freq": 0.062}, {"bin_center": 95.47364325977078, "column": "price_usd", "rel_freq": 0.11800000000000001}, {"bin_center": 116.75563975194217, "column": "price_usd", "rel_freq": 0.092}, {"bin_center": 173.50763039773253, "column": "price_usd", "rel_freq": 0.001}, {"bin_center": 88.37964442904699, "column": "price_usd", "rel_freq": 0.134}, {"bin_center": 67.09764793687562, "column": "price_usd", "rel_freq": 0.034}, {"bin_center": 102.56764209049459, "column": "price_usd", "rel_freq": 0.154}, {"bin_center": 25.5, "column": "srch_booking_window", "rel_freq": 0.064}, {"bin_center": 5.8999999999999995, "column": "srch_booking_window", "rel_freq": 0.034}, {"bin_center": 22.7, "column": "srch_booking_window", "rel_freq": 0.041}, {"bin_center": 8.7, "column": "srch_booking_window", "rel_freq": 0.037}, {"bin_center": 26.9, "column": "srch_booking_window", "rel_freq": 0.021}, {"bin_center": 11.5, "column": "srch_booking_window", "rel_freq": 0.067}, {"bin_center": 24.099999999999998, "column": "srch_booking_window", "rel_freq": 0.025}, {"bin_center": 15.7, "column": "srch_booking_window", "rel_freq": 0.028}, {"bin_center": 0.30000000000000004, "column": "srch_booking_window", "rel_freq": 0.032}, {"bin_center": 21.3, "column": "srch_booking_window", "rel_freq": 0.073}, {"bin_center": 14.3, "column": "srch_booking_window", "rel_freq": 0.07}, {"bin_center": 10.1, "column": "srch_booking_window", "rel_freq": 0.036000000000000004}, {"bin_center": 12.9, "column": "srch_booking_window", "rel_freq": 0.035}, {"bin_center": 18.5, "column": "srch_booking_window", "rel_freq": 0.069}, {"bin_center": 28.3, "column": "srch_booking_window", "rel_freq": 0.077}, {"bin_center": 3.0999999999999996, "column": "srch_booking_window", "rel_freq": 0.036000000000000004}, {"bin_center": 17.099999999999998, "column": "srch_booking_window", "rel_freq": 0.032}, {"bin_center": 7.3, "column": "srch_booking_window", "rel_freq": 0.07100000000000001}, {"bin_center": 19.9, "column": "srch_booking_window", "rel_freq": 0.033}, {"bin_center": 1.7, "column": "srch_booking_window", "rel_freq": 0.041}, {"bin_center": 4.499999999999999, "column": "srch_booking_window", "rel_freq": 0.078}, {"bin_center": 1.9749999999999999, "column": "srch_adults_count", "rel_freq": 0.242}, {"bin_center": 0.925, "column": "srch_adults_count", "rel_freq": 0.252}, {"bin_center": 3.925, "column": "srch_adults_count", "rel_freq": 0.268}, {"bin_center": 3.025, "column": "srch_adults_count", "rel_freq": 0.23800000000000002}]}, {"name": "param_15_store"}, {"name": "source_0", "source": "_server_source_0", "transform": [{"type": "filter", "expr": "(((checkbox_price_usd && (datum.column === 'price_usd')) || (checkbox_srch_booking_window && (datum.column === 'srch_booking_window'))) || (checkbox_srch_adults_count && (datum.column === 'srch_adults_count')))"}, {"type": "stack", "field": "rel_freq", "groupby": ["bin_center"], "sort": {"field": ["column"], "order": ["descending"]}, "as": ["rel_freq_start", "rel_freq_end"], "offset": "zero"}, {"type": "filter", "expr": "isValid(datum[\"bin_center\"]) && isFinite(+datum[\"bin_center\"]) && isValid(datum[\"rel_freq\"]) && isFinite(+datum[\"rel_freq\"])"}, {"type": "project", "fields": ["bin_center", "column", "rel_freq", "rel_freq_end", "rel_freq_start"]}]}, {"name": "source_0_x_domain_bin_center", "source": "source_0", "transform": [{"type": "formula", "expr": "+datum['bin_center']", "as": "bin_center"}, {"type": "aggregate", "groupby": [], "fields": ["bin_center", "bin_center"], "ops": ["min", "max"], "as": ["min", "max"]}]}, {"name": "source_0_color_domain_column", "source": "source_0", "transform": [{"type": "aggregate", "groupby": ["column"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['column']", "as": "sort_field"}, {"type": "project", "fields": ["column"]}]}], "signals": [{"name": "unit", "value": {}, "on": [{"events": "pointermove", "update": "isTuple(group()) ? group() : unit"}]}, {"name": "param_15", "update": "vlSelectionResolve(\"param_15_store\", \"union\")"}, {"name": "checkbox_price_usd", "value": true, "bind": {"input": "checkbox"}}, {"name": "checkbox_srch_booking_window", "value": true, "bind": {"input": "checkbox"}}, {"name": "checkbox_srch_adults_count", "value": true, "bind": {"input": "checkbox"}}, {"name": "param_15_bin_center", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_15_translate_delta"}, "update": "panLinear(param_15_translate_anchor.extent_x, -param_15_translate_delta.x / width)"}, {"events": {"signal": "param_15_zoom_delta"}, "update": "zoomLinear(domain(\"x\"), param_15_zoom_anchor.x, param_15_zoom_delta)"}]}, {"name": "param_15_rel_freq", "on": [{"events": [{"source": "view", "type": "dblclick"}], "update": "null"}, {"events": {"signal": "param_15_translate_delta"}, "update": "panLinear(param_15_translate_anchor.extent_y, param_15_translate_delta.y / height)"}, {"events": {"signal": "param_15_zoom_delta"}, "update": "zoomLinear(domain(\"y\"), param_15_zoom_anchor.y, param_15_zoom_delta)"}]}, {"name": "param_15_tuple", "on": [{"events": [{"signal": "param_15_bin_center || param_15_rel_freq"}], "update": "param_15_bin_center && param_15_rel_freq ? {unit: \"\", fields: param_15_tuple_fields, values: [param_15_bin_center,param_15_rel_freq]} : null"}]}, {"name": "param_15_tuple_fields", "value": [{"field": "bin_center", "channel": "x", "type": "R"}, {"field": "rel_freq", "channel": "y", "type": "R"}]}, {"name": "param_15_translate_anchor", "value": {}, "on": [{"events": [{"source": "scope", "type": "pointerdown"}], "update": "{x: x(unit), y: y(unit), extent_x: domain(\"x\"), extent_y: domain(\"y\")}"}]}, {"name": "param_15_translate_delta", "value": {}, "on": [{"events": [{"source": "window", "between": [{"source": "scope", "type": "pointerdown"}, {"source": "window", "type": "pointerup"}], "type": "pointermove", "consume": true}], "update": "{x: param_15_translate_anchor.x - x(unit), y: param_15_translate_anchor.y - y(unit)}"}]}, {"name": "param_15_zoom_anchor", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "{x: invert(\"x\", x(unit)), y: invert(\"y\", y(unit))}"}]}, {"name": "param_15_zoom_delta", "on": [{"events": [{"source": "scope", "consume": true, "type": "wheel"}], "update": "pow(1.001, event.deltaY * pow(16, event.deltaMode))", "force": true}]}, {"name": "param_15_modify", "on": [{"events": {"signal": "param_15_tuple"}, "update": "modify(\"param_15_store\", param_15_tuple, true)"}]}], "marks": [{"type": "rect", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"opacity": {"value": 0.6}, "y2": {"field": "rel_freq_start", "scale": "y"}, "fill": {"field": "column", "scale": "color"}, "width": {"value": 5}, "y": {"field": "rel_freq_end", "scale": "y"}, "tooltip": {"signal": "{\"column\": isValid(datum[\"column\"]) ? datum[\"column\"] : \"\"+datum[\"column\"], \"bin_center\": format(datum[\"bin_center\"], \"\"), \"rel_freq\": format(datum[\"rel_freq\"], \"\")}"}, "xc": {"field": "bin_center", "scale": "x"}}}, "style": ["bar"], "interactive": true, "clip": true}], "scales": [{"name": "x", "type": "linear", "domain": [{"signal": "(data(\"source_0_x_domain_bin_center\")[0] || {}).min"}, {"signal": "(data(\"source_0_x_domain_bin_center\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "domainRaw": {"signal": "param_15[\"bin_center\"]"}, "zero": false, "padding": 5, "nice": true}, {"name": "y", "type": "linear", "domain": {"data": "source_0", "fields": ["rel_freq_start", "rel_freq_end"]}, "range": [{"signal": "height"}, 0], "domainRaw": {"signal": "param_15[\"rel_freq\"]"}, "zero": true, "nice": true}, {"name": "color", "type": "ordinal", "domain": {"data": "source_0_color_domain_column", "field": "column", "sort": true}, "range": "category"}], "axes": [{"scale": "x", "grid": true, "labels": false, "zindex": 0, "tickCount": {"signal": "ceil(width/40)"}, "gridScale": "y", "orient": "bottom", "domain": false, "maxExtent": 0, "minExtent": 0, "aria": false, "ticks": false}, {"scale": "y", "aria": false, "maxExtent": 0, "orient": "left", "labels": false, "ticks": false, "minExtent": 0, "tickCount": {"signal": "ceil(height/40)"}, "grid": true, "domain": false, "zindex": 0, "gridScale": "x"}, {"scale": "x", "orient": "bottom", "title": "Value", "grid": false, "labelFlush": true, "tickCount": {"signal": "ceil(width/40)"}, "labelOverlap": true, "zindex": 0}, {"scale": "y", "orient": "left", "labelOverlap": true, "zindex": 0, "title": "rel_freq", "grid": false, "tickCount": {"signal": "ceil(height/40)"}}], "height": 400, "padding": 5, "style": "cell", "width": 800, "background": "white", "legends": [{"title": "Column", "fill": "color", "symbolType": "square", "encode": {"symbols": {"update": {"opacity": {"value": 0.6}}}}}]};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>