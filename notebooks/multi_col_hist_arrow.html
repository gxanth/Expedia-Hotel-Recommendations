<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
  <div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "_server_source_0", "values": [{"bin_center": 69.01881812205677, "column": "feature_1", "rel_frequency": 0.022}, {"bin_center": 79.65981636814246, "column": "feature_1", "rel_frequency": 0.002}, {"bin_center": 33.54882396843781, "column": "feature_1", "rel_frequency": 0.034}, {"bin_center": 58.377819875971085, "column": "feature_1", "rel_frequency": 0.1}, {"bin_center": 37.095823383799704, "column": "feature_1", "rel_frequency": 0.06}, {"bin_center": 72.56581753741867, "column": "feature_1", "rel_frequency": 0.018000000000000002}, {"bin_center": 51.283821045247294, "column": "feature_1", "rel_frequency": 0.15}, {"bin_center": 86.75381519886626, "column": "feature_1", "rel_frequency": 0.002}, {"bin_center": 61.92481929133298, "column": "feature_1", "rel_frequency": 0.054}, {"bin_center": 30.001824553075913, "column": "feature_1", "rel_frequency": 0.018000000000000002}, {"bin_center": 54.83082046060919, "column": "feature_1", "rel_frequency": 0.14}, {"bin_center": 40.6428227991616, "column": "feature_1", "rel_frequency": 0.11800000000000001}, {"bin_center": 47.73682162988539, "column": "feature_1", "rel_frequency": 0.108}, {"bin_center": 76.11281695278056, "column": "feature_1", "rel_frequency": 0.004}, {"bin_center": 65.47181870669488, "column": "feature_1", "rel_frequency": 0.036000000000000004}, {"bin_center": 26.454825137714014, "column": "feature_1", "rel_frequency": 0.006}, {"bin_center": 15.813826891628324, "column": "feature_1", "rel_frequency": 0.002}, {"bin_center": 44.189822214523495, "column": "feature_1", "rel_frequency": 0.126}, {"bin_center": 35.62563888166919, "column": "feature_2", "rel_frequency": 0.068}, {"bin_center": 41.106563567136654, "column": "feature_2", "rel_frequency": 0.006}, {"bin_center": 27.40425185346799, "column": "feature_2", "rel_frequency": 0.114}, {"bin_center": 24.663789510734254, "column": "feature_2", "rel_frequency": 0.044}, {"bin_center": 16.442402482533055, "column": "feature_2", "rel_frequency": 0.004}, {"bin_center": 34.25540771030232, "column": "feature_2", "rel_frequency": 0.058}, {"bin_center": 19.18286482526679, "column": "feature_2", "rel_frequency": 0.008}, {"bin_center": 32.885176538935454, "column": "feature_2", "rel_frequency": 0.108}, {"bin_center": 20.553095996633655, "column": "feature_2", "rel_frequency": 0.008}, {"bin_center": 17.812633653899923, "column": "feature_2", "rel_frequency": 0.002}, {"bin_center": 36.99587005303606, "column": "feature_2", "rel_frequency": 0.042}, {"bin_center": 38.366101224402925, "column": "feature_2", "rel_frequency": 0.04}, {"bin_center": 39.736332395769786, "column": "feature_2", "rel_frequency": 0.02}, {"bin_center": 15.072171311166189, "column": "feature_2", "rel_frequency": 0.002}, {"bin_center": 42.47679473850352, "column": "feature_2", "rel_frequency": 0.012}, {"bin_center": 31.514945367568586, "column": "feature_2", "rel_frequency": 0.12}, {"bin_center": 21.923327168000522, "column": "feature_2", "rel_frequency": 0.034}, {"bin_center": 30.144714196201722, "column": "feature_2", "rel_frequency": 0.12}, {"bin_center": 28.774483024834858, "column": "feature_2", "rel_frequency": 0.08600000000000001}, {"bin_center": 23.293558339367387, "column": "feature_2", "rel_frequency": 0.05}, {"bin_center": 26.034020682101122, "column": "feature_2", "rel_frequency": 0.054}, {"bin_center": 113.74911188709538, "column": "feature_3", "rel_frequency": 0.022}, {"bin_center": 86.13394389872037, "column": "feature_3", "rel_frequency": 0.068}, {"bin_center": 80.61091030104538, "column": "feature_3", "rel_frequency": 0.112}, {"bin_center": 108.22607828942039, "column": "feature_3", "rel_frequency": 0.012}, {"bin_center": 119.27214548477039, "column": "feature_3", "rel_frequency": 0.012}, {"bin_center": 52.99574231267037, "column": "feature_3", "rel_frequency": 0.074}, {"bin_center": 75.08787670337037, "column": "feature_3", "rel_frequency": 0.10200000000000001}, {"bin_center": 102.70304469174538, "column": "feature_3", "rel_frequency": 0.046}, {"bin_center": 41.94967511732037, "column": "feature_3", "rel_frequency": 0.038}, {"bin_center": 25.38057432429536, "column": "feature_3", "rel_frequency": 0.006}, {"bin_center": 58.518775910345376, "column": "feature_3", "rel_frequency": 0.084}, {"bin_center": 30.903607921970366, "column": "feature_3", "rel_frequency": 0.01}, {"bin_center": 97.18001109407038, "column": "feature_3", "rel_frequency": 0.038}, {"bin_center": 69.56484310569537, "column": "feature_3", "rel_frequency": 0.112}, {"bin_center": 14.334507128945358, "column": "feature_3", "rel_frequency": 0.004}, {"bin_center": 91.65697749639538, "column": "feature_3", "rel_frequency": 0.066}, {"bin_center": 47.47270871499537, "column": "feature_3", "rel_frequency": 0.068}, {"bin_center": 8.811473531270355, "column": "feature_3", "rel_frequency": 0.002}, {"bin_center": 64.04180950802038, "column": "feature_3", "rel_frequency": 0.09}, {"bin_center": 19.85754072662036, "column": "feature_3", "rel_frequency": 0.008}, {"bin_center": 36.426641519645365, "column": "feature_3", "rel_frequency": 0.026000000000000002}]}, {"name": "source_0", "source": "_server_source_0", "transform": [{"type": "filter", "expr": "((column_choice === 'All') || (datum.column === column_choice))"}, {"type": "stack", "field": "rel_frequency", "groupby": ["bin_center"], "sort": {"field": ["column"], "order": ["descending"]}, "as": ["rel_frequency_start", "rel_frequency_end"], "offset": "zero"}, {"type": "filter", "expr": "isValid(datum[\"bin_center\"]) && isFinite(+datum[\"bin_center\"]) && isValid(datum[\"rel_frequency\"]) && isFinite(+datum[\"rel_frequency\"])"}, {"type": "project", "fields": ["bin_center", "column", "rel_frequency", "rel_frequency_end", "rel_frequency_start"]}]}, {"name": "source_0_x_domain_bin_center", "source": "source_0", "transform": [{"type": "formula", "expr": "+datum['bin_center']", "as": "bin_center"}, {"type": "aggregate", "groupby": [], "fields": ["bin_center", "bin_center"], "ops": ["min", "max"], "as": ["min", "max"]}]}, {"name": "source_0_color_domain_column", "source": "source_0", "transform": [{"type": "aggregate", "groupby": ["column"], "fields": [], "ops": [], "as": []}, {"type": "formula", "expr": "datum['column']", "as": "sort_field"}, {"type": "project", "fields": ["column"]}]}], "signals": [{"name": "column_choice", "value": "All", "bind": {"input": "select", "options": ["All", "feature_1", "feature_2", "feature_3"], "labels": ["All", "feature_1", "feature_2", "feature_3"], "name": "Select Column"}}], "marks": [{"type": "rect", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"fill": {"field": "column", "scale": "color"}, "tooltip": {"signal": "{\"Column\": isValid(datum[\"column\"]) ? datum[\"column\"] : \"\"+datum[\"column\"], \"Bin Center\": format(datum[\"bin_center\"], \"\"), \"Frequency\": format(datum[\"rel_frequency\"], \"\")}"}, "xc": {"field": "bin_center", "scale": "x"}, "width": {"value": 5}, "opacity": {"value": 0.6}, "y2": {"field": "rel_frequency_start", "scale": "y"}, "y": {"field": "rel_frequency_end", "scale": "y"}}}, "style": ["bar"]}], "scales": [{"name": "x", "type": "linear", "domain": [{"signal": "(data(\"source_0_x_domain_bin_center\")[0] || {}).min"}, {"signal": "(data(\"source_0_x_domain_bin_center\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "zero": false, "padding": 5, "nice": true}, {"name": "y", "type": "linear", "domain": {"data": "source_0", "fields": ["rel_frequency_start", "rel_frequency_end"]}, "range": [{"signal": "height"}, 0], "nice": true, "zero": true}, {"name": "color", "type": "ordinal", "domain": {"data": "source_0_color_domain_column", "field": "column", "sort": true}, "range": "category"}], "axes": [{"scale": "x", "ticks": false, "domain": false, "gridScale": "y", "aria": false, "grid": true, "minExtent": 0, "maxExtent": 0, "zindex": 0, "labels": false, "orient": "bottom", "tickCount": {"signal": "ceil(width/40)"}}, {"scale": "y", "domain": false, "aria": false, "gridScale": "x", "ticks": false, "grid": true, "maxExtent": 0, "labels": false, "orient": "left", "tickCount": {"signal": "ceil(height/40)"}, "minExtent": 0, "zindex": 0}, {"scale": "x", "title": "Value", "labelOverlap": true, "grid": false, "labelFlush": true, "tickCount": {"signal": "ceil(width/40)"}, "labelAlign": "left", "zindex": 0, "labelBaseline": "top", "orient": "bottom"}, {"scale": "y", "tickCount": {"signal": "ceil(height/40)"}, "zindex": 0, "orient": "left", "title": "Rel. Frequency", "grid": false, "labelOverlap": true}], "title": {"text": "Multi-Column Histogram", "frame": "group"}, "config": {"axisX": {"labelAngle": 45}}, "width": 700, "style": "cell", "background": "white", "legends": [{"title": "Column", "fill": "color", "symbolType": "square", "encode": {"symbols": {"update": {"opacity": {"value": 0.6}}}}}], "height": 400, "padding": 5};
      var embedOpt = {"mode": "vega"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>